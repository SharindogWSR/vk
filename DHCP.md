# DHCP
```bash
apt-get install isc-dhcp-server
nano /etc/dhcp/dhcpd.conf 
``` 
Оставляем 1 и 2 (фото) - комментарии убираем вниз
[![https://sun9-65.userapi.com/impg/Z84j0U8wdnfyDd2HAmG35BZ4DtYRi8_Io0h5Yw/cS950v7KSOM.jpg?size=532x168&quality=96&sign=aa954f7cedc119661549c5a5893cbeef&type=album](https://sun9-65.userapi.com/impg/Z84j0U8wdnfyDd2HAmG35BZ4DtYRi8_Io0h5Yw/cS950v7KSOM.jpg?size=532x168&quality=96&sign=aa954f7cedc119661549c5a5893cbeef&type=album "https://sun9-65.userapi.com/impg/Z84j0U8wdnfyDd2HAmG35BZ4DtYRi8_Io0h5Yw/cS950v7KSOM.jpg?size=532x168&quality=96&sign=aa954f7cedc119661549c5a5893cbeef&type=album")](https://sun9-65.userapi.com/impg/Z84j0U8wdnfyDd2HAmG35BZ4DtYRi8_Io0h5Yw/cS950v7KSOM.jpg?size=532x168&quality=96&sign=aa954f7cedc119661549c5a5893cbeef&type=album "https://sun9-65.userapi.com/impg/Z84j0U8wdnfyDd2HAmG35BZ4DtYRi8_Io0h5Yw/cS950v7KSOM.jpg?size=532x168&quality=96&sign=aa954f7cedc119661549c5a5893cbeef&type=album")


[![https://sun9-14.userapi.com/impg/2PCihjTpSqGnr_4vWB6Y9UL0dd6xRAhCW1SgzA/b6w_6ITPF3E.jpg?size=555x152&quality=96&sign=023bedca6603f5259cb5d6f9662419a2&type=album](https://sun9-14.userapi.com/impg/2PCihjTpSqGnr_4vWB6Y9UL0dd6xRAhCW1SgzA/b6w_6ITPF3E.jpg?size=555x152&quality=96&sign=023bedca6603f5259cb5d6f9662419a2&type=album "https://sun9-14.userapi.com/impg/2PCihjTpSqGnr_4vWB6Y9UL0dd6xRAhCW1SgzA/b6w_6ITPF3E.jpg?size=555x152&quality=96&sign=023bedca6603f5259cb5d6f9662419a2&type=album")](https://sun9-14.userapi.com/impg/2PCihjTpSqGnr_4vWB6Y9UL0dd6xRAhCW1SgzA/b6w_6ITPF3E.jpg?size=555x152&quality=96&sign=023bedca6603f5259cb5d6f9662419a2&type=album "https://sun9-14.userapi.com/impg/2PCihjTpSqGnr_4vWB6Y9UL0dd6xRAhCW1SgzA/b6w_6ITPF3E.jpg?size=555x152&quality=96&sign=023bedca6603f5259cb5d6f9662419a2&type=album")

если указываем другую подсеть (172.16.20.0, например), то 172.16.10.0 всё равно должен остаться фото 3

[![https://sun9-59.userapi.com/impg/IYlKdCYdkIQUPjfo3MPiFSx_oLmaBii71iIitA/moJUGL76ZK0.jpg?size=568x351&quality=96&sign=6e8cf62d36bc9c0f68106103a54c5c11&type=album](https://sun9-59.userapi.com/impg/IYlKdCYdkIQUPjfo3MPiFSx_oLmaBii71iIitA/moJUGL76ZK0.jpg?size=568x351&quality=96&sign=6e8cf62d36bc9c0f68106103a54c5c11&type=album "https://sun9-59.userapi.com/impg/IYlKdCYdkIQUPjfo3MPiFSx_oLmaBii71iIitA/moJUGL76ZK0.jpg?size=568x351&quality=96&sign=6e8cf62d36bc9c0f68106103a54c5c11&type=album")](https://sun9-59.userapi.com/impg/IYlKdCYdkIQUPjfo3MPiFSx_oLmaBii71iIitA/moJUGL76ZK0.jpg?size=568x351&quality=96&sign=6e8cf62d36bc9c0f68106103a54c5c11&type=album "https://sun9-59.userapi.com/impg/IYlKdCYdkIQUPjfo3MPiFSx_oLmaBii71iIitA/moJUGL76ZK0.jpg?size=568x351&quality=96&sign=6e8cf62d36bc9c0f68106103a54c5c11&type=album")

если нужно указать конкретный IP для машины, то фото 4
[![https://sun9-63.userapi.com/impg/uoQYaMesKfmaWpSWl2_Bgk4tQpP7Y0zxFrnH-Q/7fWrQdK0Kjs.jpg?size=403x116&quality=96&sign=228fecce087312d53a6961f019076181&type=album](https://sun9-63.userapi.com/impg/uoQYaMesKfmaWpSWl2_Bgk4tQpP7Y0zxFrnH-Q/7fWrQdK0Kjs.jpg?size=403x116&quality=96&sign=228fecce087312d53a6961f019076181&type=album "https://sun9-63.userapi.com/impg/uoQYaMesKfmaWpSWl2_Bgk4tQpP7Y0zxFrnH-Q/7fWrQdK0Kjs.jpg?size=403x116&quality=96&sign=228fecce087312d53a6961f019076181&type=album")](https://sun9-63.userapi.com/impg/uoQYaMesKfmaWpSWl2_Bgk4tQpP7Y0zxFrnH-Q/7fWrQdK0Kjs.jpg?size=403x116&quality=96&sign=228fecce087312d53a6961f019076181&type=album "https://sun9-63.userapi.com/impg/uoQYaMesKfmaWpSWl2_Bgk4tQpP7Y0zxFrnH-Q/7fWrQdK0Kjs.jpg?size=403x116&quality=96&sign=228fecce087312d53a6961f019076181&type=album")

## Итоговый файл DHCP
[![https://sun9-69.userapi.com/impg/R_EMTDGDm4rSKBAZdFInWuTN3D92dTT0gYr4aQ/WyZdVe6JoKU.jpg?size=553x305&quality=96&sign=2fcede3040a8401e9489fca0e60d7cf7&type=album](https://sun9-69.userapi.com/impg/R_EMTDGDm4rSKBAZdFInWuTN3D92dTT0gYr4aQ/WyZdVe6JoKU.jpg?size=553x305&quality=96&sign=2fcede3040a8401e9489fca0e60d7cf7&type=album "https://sun9-69.userapi.com/impg/R_EMTDGDm4rSKBAZdFInWuTN3D92dTT0gYr4aQ/WyZdVe6JoKU.jpg?size=553x305&quality=96&sign=2fcede3040a8401e9489fca0e60d7cf7&type=album")](https://sun9-69.userapi.com/impg/R_EMTDGDm4rSKBAZdFInWuTN3D92dTT0gYr4aQ/WyZdVe6JoKU.jpg?size=553x305&quality=96&sign=2fcede3040a8401e9489fca0e60d7cf7&type=album "https://sun9-69.userapi.com/impg/R_EMTDGDm4rSKBAZdFInWuTN3D92dTT0gYr4aQ/WyZdVe6JoKU.jpg?size=553x305&quality=96&sign=2fcede3040a8401e9489fca0e60d7cf7&type=album")


```
nano /etc/default/isc-dhcp-server 
```
определяем, на какие интерфейсы разрешено DHCP серверу выдавать IP адреса

[![https://sun9-3.userapi.com/impg/21d37nwuxlmk8_Q1wIXbGoJ7V6vuTkjZAL1Ztg/dDueAlaY8_w.jpg?size=240x70&quality=96&sign=19f374c090a3aae935c8823aad8decc3&type=album](https://sun9-3.userapi.com/impg/21d37nwuxlmk8_Q1wIXbGoJ7V6vuTkjZAL1Ztg/dDueAlaY8_w.jpg?size=240x70&quality=96&sign=19f374c090a3aae935c8823aad8decc3&type=album "https://sun9-3.userapi.com/impg/21d37nwuxlmk8_Q1wIXbGoJ7V6vuTkjZAL1Ztg/dDueAlaY8_w.jpg?size=240x70&quality=96&sign=19f374c090a3aae935c8823aad8decc3&type=album")](https://sun9-3.userapi.com/impg/21d37nwuxlmk8_Q1wIXbGoJ7V6vuTkjZAL1Ztg/dDueAlaY8_w.jpg?size=240x70&quality=96&sign=19f374c090a3aae935c8823aad8decc3&type=album "https://sun9-3.userapi.com/impg/21d37nwuxlmk8_Q1wIXbGoJ7V6vuTkjZAL1Ztg/dDueAlaY8_w.jpg?size=240x70&quality=96&sign=19f374c090a3aae935c8823aad8decc3&type=album")
[![https://sun9-41.userapi.com/impg/ZXfw_b9LHDTUUkQlG6H8HHGXajGdPLUD9VNw7g/NLfcAyKe_pk.jpg?size=373x54&quality=96&sign=f73aa61a766869e4b27c00b217885161&type=album](https://sun9-41.userapi.com/impg/ZXfw_b9LHDTUUkQlG6H8HHGXajGdPLUD9VNw7g/NLfcAyKe_pk.jpg?size=373x54&quality=96&sign=f73aa61a766869e4b27c00b217885161&type=album "https://sun9-41.userapi.com/impg/ZXfw_b9LHDTUUkQlG6H8HHGXajGdPLUD9VNw7g/NLfcAyKe_pk.jpg?size=373x54&quality=96&sign=f73aa61a766869e4b27c00b217885161&type=album")](https://sun9-41.userapi.com/impg/ZXfw_b9LHDTUUkQlG6H8HHGXajGdPLUD9VNw7g/NLfcAyKe_pk.jpg?size=373x54&quality=96&sign=f73aa61a766869e4b27c00b217885161&type=album "https://sun9-41.userapi.com/impg/ZXfw_b9LHDTUUkQlG6H8HHGXajGdPLUD9VNw7g/NLfcAyKe_pk.jpg?size=373x54&quality=96&sign=f73aa61a766869e4b27c00b217885161&type=album")

```bash
service isc-dhcp-server restart
journalctl -xe
``` 
посмотреть есть ли ошибки 
проверка:```
 tcpdump -i ens33 port 67 and port 68 
```- прослушка всего трафика ens33 (dhcp работает на 67 - принимает, 68 - отправляет)

# DHCP Relay
на CLI установить apt-get install isc-dhcp-relay
везде ждём ОК

dhcrelay -4 172.16.10.10 (адрес сервера, где установлен DHCP сервер)
dhcrelay -6 -l ens37 -u ens33 
